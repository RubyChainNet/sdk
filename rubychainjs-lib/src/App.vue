<template>
  <div id="app">
    <button @click="createWallet()">create wallet</button>
    <br>
    <textarea style="width:500px;height:150px">{{walletData}}</textarea>

    <hr>
    <button @click="sign()">Sign</button> 
    

    <hr>
  </div>
</template>

<script>
import {
  createWalletAddress,
  hextoString,
  signTx,
  fromWIF,
  generatePubKey,
  generateAddress,test
} from "../static/common/rubyjs-lib-release1.0.js";

export default {
  name: "App",
  data() {
    return {
      walletData: "",
      signedData: ""
    };
  },
  methods: {
    createWallet: function() {
      var _self = this;
      _self.walletData = createWalletAddress("password", "Account1");

      console.log("this.walletData.privKey:" + _self.walletData.privateAdd);
      var tt = fromWIF('V9UKpQaZQwPEb8egPNLUhVpNAsTBPKnES54gTBqH9zomRXNoEwrjYNg8');
      console.log("tt:" + tt.toString('hex'));

var addr = generateAddress(tt)
      console.log("addr:" + addr.toString("hex"));
      var pubkey = generatePubKey(tt);
      console.log("pubkey:" + pubkey.toString("hex"));

      // var privKey = "VFXLwMKC5W5SjjNmDV2rVJa4aWLiRwd3MyjWswUa3bKkTu9W34D8ae7p";
      // var tt = fromWIF(privKey);
      // console.log("tt:" + tt.toString("hex"));

      // var addr = generateAddress(tt);
      // console.log("addr:" + addr.toString("hex"));

      // var pubkey = generatePubKey(tt);
      // console.log("pubkey:" + pubkey.toString("hex"));
    }, 
    sign: function() {
      var decodeRawTx =
        "7b226c6f636b74696d65223a302c2274786964223a2262616131393932326162646235323465633866343839323663376136383266613534646139656365646431316164653762393336363830636663353163336335222c2276696e223a5b7b2273657175656e6365223a343239343936373239352c22736372697074536967223a7b2261736d223a22222c22686578223a22227d2c2274786964223a2231326362363632313531343062343432393966633137316665306437613830303932613939666232383266656166346330356665326135393230303431323566222c22766f7574223a307d2c7b2273657175656e6365223a343239343936373239352c22736372697074536967223a7b2261736d223a22222c22686578223a22227d2c2274786964223a2266623063613438376439643830363036326130616238663937363435633135356265306637663233333231613762613364336530393433323964383233623465222c22766f7574223a327d5d2c2276657273696f6e223a312c22766f7574223a5b7b227363726970745075624b6579223a7b22616464726573736573223a5b223150364e396a737837486f57477950367873714172656151506b52426442666a6e7777647759225d2c2261736d223a224f505f445550204f505f484153483136302061333735663231333635316437643132646261623163383236386138633534643439636534393432204f505f455155414c564552494659204f505f434845434b534947203733373036623731373939316563366534333561663666386163663266623234346237633837343030313030303030303030303030303030204f505f44524f50222c22686578223a223736613931346133373566323133363531643764313264626162316338323638613863353464343963653439343238386163316337333730366237313739393165633665343335616636663861636632666232343462376338373430303130303030303030303030303030303735222c2274797065223a227075626b657968617368222c2272657153696773223a317d2c22617373657473223a5b7b2273656c6c74786964223a2234303837376334623234666266326163663866363561343336656563393137393538616633636430636639613563363538303737383734623662633334353539222c226173736574726566223a22353232392d3330302d3334363234222c22717479223a312c226e616d65223a22474c4c222c22726177223a312c2274797065223a227472616e73666572227d5d2c2276616c7565223a302c226e223a307d2c7b227363726970745075624b6579223a7b2261736d223a224f505f52455455524e20376232323636373236663664343136343634373232323361323233313337353635323634363136353639343834643637363737383734353336393635353037343337373837613432343836343432353936663537333733353338363736623336333935353666323232633232363236353734373436393665363734653735366432323361333132633232373036353732363936663634343336663635323233613232323333323330333133393330333433353232326332323663366637343734363537323739353437393730363534393634323233613331326332323632363537343734363936653637346537353664363236353732323233613562323233323336326333343332326333353339326333323338326333353336323333313330323235643263323236323635373437343639366536373464373536633734363937303663363532323361323233313232326332323632363537343734363936653637343136643666373536653734323233613331326332323637366437343433373236353631373436353232336133313335333533353335333833383339333833363330333433313764222c22686578223a22366134636435376232323636373236663664343136343634373232323361323233313337353635323634363136353639343834643637363737383734353336393635353037343337373837613432343836343432353936663537333733353338363736623336333935353666323232633232363236353734373436393665363734653735366432323361333132633232373036353732363936663634343336663635323233613232323333323330333133393330333433353232326332323663366637343734363537323739353437393730363534393634323233613331326332323632363537343734363936653637346537353664363236353732323233613562323233323336326333343332326333353339326333323338326333353336323333313330323235643263323236323635373437343639366536373464373536633734363937303663363532323361323233313232326332323632363537343734363936653637343136643666373536653734323233613331326332323637366437343433373236353631373436353232336133313335333533353335333833383339333833363330333433313764222c2274797065223a226e756c6c64617461227d2c2264617461223a5b22376232323636373236663664343136343634373232323361323233313337353635323634363136353639343834643637363737383734353336393635353037343337373837613432343836343432353936663537333733353338363736623336333935353666323232633232363236353734373436393665363734653735366432323361333132633232373036353732363936663634343336663635323233613232323333323330333133393330333433353232326332323663366637343734363537323739353437393730363534393634323233613331326332323632363537343734363936653637346537353664363236353732323233613562323233323336326333343332326333353339326333323338326333353336323333313330323235643263323236323635373437343639366536373464373536633734363937303663363532323361323233313232326332323632363537343734363936653637343136643666373536653734323233613331326332323637366437343433373236353631373436353232336133313335333533353335333833383339333833363330333433313764225d2c2276616c7565223a302c226e223a317d2c7b227363726970745075624b6579223a7b22616464726573736573223a5b223137565264616569484d67677874536965507437787a42486442596f57373538676b3639556f225d2c2261736d223a224f505f445550204f505f484153483136302033303035303630643833626536393565333963643937653130653032363761373963373032353866204f505f455155414c564552494659204f505f434845434b534947203733373036623731373939316563366534333561663666386163663266623234346237633837343030313030303030303030303030303030204f505f44524f50222c22686578223a223736613931343330303530363064383362653639356533396364393765313065303236376137396337303235386638386163316337333730366237313739393165633665343335616636663861636632666232343462376338373430303130303030303030303030303030303735222c2274797065223a227075626b657968617368222c2272657153696773223a317d2c22617373657473223a5b7b2273656c6c74786964223a2234303837376334623234666266326163663866363561343336656563393137393538616633636430636639613563363538303737383734623662633334353539222c226173736574726566223a22353232392d3330302d3334363234222c22717479223a312c226e616d65223a22474c4c222c22726177223a312c2274797065223a227472616e73666572227d5d2c2276616c7565223a302c226e223a327d2c7b227363726970745075624b6579223a7b22616464726573736573223a5b223137565264616569484d67677874536965507437787a42486442596f57373538676b3639556f225d2c2261736d223a224f505f445550204f505f484153483136302033303035303630643833626536393565333963643937653130653032363761373963373032353866204f505f455155414c564552494659204f505f434845434b534947222c22686578223a223736613931343330303530363064383362653639356533396364393765313065303236376137396337303235386638386163222c2274797065223a227075626b657968617368222c2272657153696773223a317d2c2276616c7565223a302e303837362c226e223a337d5d7d";
      var unspent =
        "5b7b227363726970745075624b6579223a7b22616464726573736573223a5b223137565264616569484d67677874536965507437787a42486442596f57373538676b3639556f225d2c2261736d223a224f505f445550204f505f484153483136302033303035303630643833626536393565333963643937653130653032363761373963373032353866204f505f455155414c564552494659204f505f434845434b534947203733373036623731373939316563366534333561663666386163663266623234346237633837343030323030303030303030303030303030204f505f44524f50222c22686578223a223736613931343330303530363064383362653639356533396364393765313065303236376137396337303235386638386163316337333730366237313739393165633665343335616636663861636632666232343462376338373430303230303030303030303030303030303735222c2274797065223a227075626b657968617368222c2272657153696773223a317d2c22636f696e62617365223a66616c73652c22617373657473223a5b7b2273656c6c74786964223a2234303837376334623234666266326163663866363561343336656563393137393538616633636430636639613563363538303737383734623662633334353539222c226173736574726566223a22353232392d3330302d3334363234222c22717479223a322c226e616d65223a22474c4c222c22726177223a327d5d2c2262657374626c6f636b223a2230306461306437333264343139663934646331316638333435616435326639343363633239643032336362303463623934656639666538396163306335626436222c22636f6e6669726d6174696f6e73223a393239312c2276616c7565223a302c2276657273696f6e223a317d2c7b227363726970745075624b6579223a7b22616464726573736573223a5b223137565264616569484d67677874536965507437787a42486442596f57373538676b3639556f225d2c2261736d223a224f505f445550204f505f484153483136302033303035303630643833626536393565333963643937653130653032363761373963373032353866204f505f455155414c564552494659204f505f434845434b534947222c22686578223a223736613931343330303530363064383362653639356533396364393765313065303236376137396337303235386638386163222c2274797065223a227075626b657968617368222c2272657153696773223a317d2c22636f696e62617365223a66616c73652c2262657374626c6f636b223a2230306461306437333264343139663934646331316638333435616435326639343363633239643032336362303463623934656639666538396163306335626436222c22636f6e6669726d6174696f6e73223a3832332c2276616c7565223a302e303837372c2276657273696f6e223a317d5d";

      var privKey = "7NJWxL9KTD8kH44ZJMTnrKtT5tGQtTbBtkq475y6wv89kP8zTviwixa";
      var tt = fromWIF(privKey);
      console.log("tt:" + tt.toString("hex"));

      var pubkey = generatePubKey(tt);
      console.log("pubkey:" + pubkey.toString("hex"));
      signTx(
        privKey,
        JSON.parse(hextoString(decodeRawTx)),
        JSON.parse(hextoString(unspent)),
        signedCallBack
      );
    }
  }
};

function signedCallBack(signedResult) {
  //signedData = signedResult;
  console.log("签名之后的值：" + signedResult);
}
</script>

<style>
</style>
